# Java 십이장기 네트워크 보드게임

## 1. 프로젝트 개요

이 프로젝트는 Java로 구현된 멀티플레이어 십이장기(十二將棋) 보드게임입니다. Java Socket 프로그래밍을 사용하여 클라이언트-서버 아키텍처를 구축했으며, Java Swing을 통해 GUI 환경을 제공합니다.

사용자는 서버에 접속하여 다른 사용자들과 함께 대기실을 만들고, 실시간으로 채팅하며 십이장기 게임을 즐길 수 있습니다. 또한, 다른 사람의 게임을 관전하거나 게임이 끝난 후 리플레이를 저장하는 등의 부가 기능을 포함하고 있습니다.

## 2. 주요 기능

- **멀티플레이 지원**: 소켓 통신을 기반으로 한 클라이언트-서버 모델
- **대기실 시스템**: 여러 개의 게임방을 생성하고 참여할 수 있는 로비 기능
- **실시간 채팅**: 로비 및 게임방 내에서 모든 사용자와의 실시간 채팅
- **게임 관전**: 다른 플레이어들이 진행 중인 게임을 관전하는 기능
- **게임 로직**: 십이장기 규칙에 따른 말의 이동, 포획, 승급, 게임 종료 조건 구현
- **포로 말 사용**: 잡은 상대방의 말을 자신의 말로 사용하는 기능
- **수 무르기**: 상대방의 동의 하에 한 턴을 되돌리는 기능
- **리플레이 저장**: 게임 종료 시 전체 기보를 텍스트 파일로 저장
- **시각적 피드백**: 현재 턴, 선택한 말, 이동 가능한 위치를 시각적으로 표시

## 3. 게임 규칙

1.  **게임 보드**: 가로 3칸, 세로 4칸의 총 12칸으로 구성됩니다.
2.  **말(Piece)**: 왕(王), 장(將), 상(相), 자(子) 4종류의 말이 각 1개씩 주어집니다.
    - **왕(王)**: 모든 8방향으로 1칸 이동 가능
    - **장(將)**: 상, 하, 좌, 우로 1칸 이동 가능
    - **상(相)**: 대각선 4방향으로 1칸 이동 가능
    - **자(子)**: 앞으로만 1칸 이동 가능. 상대 진영에 들어가면 **후(侯)**로 승급합니다.
    - **후(侯)**: 대각선 뒤쪽을 제외한 모든 방향으로 1칸 이동 가능
3.  **게임 진행**:
    - 자신의 턴에 말 1개를 1칸 이동시킬 수 있습니다.
    - 상대 말을 잡으면 '포로'가 되며, 다음 턴부터 자신의 말로 사용할 수 있습니다.
    - 포로를 판에 내려놓는 것도 턴을 소모하는 행동입니다.
    - 상대방의 '후'를 잡아 포로로 사용할 경우, '자'로 강등시켜 사용해야 합니다.
4.  **승리 조건**:
    - 상대방의 '왕'을 잡는 경우.
    - 자신의 '왕'을 상대방의 최종 진영(home row)에 이동시킨 후, 상대방의 다음 턴까지 살아남는 경우.

## 4. 기술 스택

- **언어**: Java (JDK 11 이상 권장)
- **UI**: Java Swing
- **네트워킹**: Java Sockets
- **아키텍처**: MVC (Model-View-Controller) 패턴을 적용한 리팩터링 진행

## 5. 실행 방법

이 프로젝트는 서버 1개와 클라이언트 2개 이상을 실행해야 테스트할 수 있습니다.

### 사전 준비

- JDK가 설치되어 있고, `javac` 및 `java` 명령어에 대한 환경 변수(PATH)가 설정되어 있어야 합니다.

### 컴파일

명령 프롬프트(CMD)를 열고 프로젝트의 루트 디렉토리로 이동한 후, 아래 명령어를 실행하여 모든 Java 파일을 컴파일합니다.

```bash
javac -d out -encoding UTF-8 src/*.java
```

### 실행

1.  **서버 실행**: 첫 번째 CMD 창에서 아래 명령어를 실행합니다.

    ```bash
    java -cp out Server
    ```

2.  **클라이언트 실행**: 두 번째, 세 번째 CMD 창을 새로 열고, 각각 아래 명령어를 실행하여 클라이언트를 2개 이상 실행합니다.

    ```bash
    java -cp out Main
    ```

3.  각 클라이언트에서 서로 다른 닉네임을 입력하여 접속한 후, 방을 만들고 게임을 테스트할 수 있습니다.

## 6. 프로젝트 구조

SOLID 원칙에 따라 각 클래스의 책임을 분리했습니다.

- **Main.java**: 프로그램의 시작점(Entry Point).
- **GameController.java**: UI와 비즈니스 로직을 중재하는 컨트롤러.
- **GameUI.java**: 모든 GUI 컴포넌트 생성 및 화면 업데이트를 담당하는 뷰.
- **GameClient.java**: 서버와의 네트워크 통신을 전담하는 클라이언트.
- **Server.java**: 클라이언트의 연결 요청을 수락하고 `ClientHandler`를 생성하는 메인 서버.
- **ClientHandler.java**: 개별 클라이언트와의 통신을 처리하는 스레드.
- **GameRoom.java**: 플레이어 그룹(방)을 관리하고 게임 세션의 생명주기를 책임지는 컨테이너.
- **GameSession.java**: 단일 게임의 시작, 진행, 종료 등 실제 게임 로직을 총괄.
- **GameLogic.java**: 게임의 턴 관리, 규칙 적용, 승패 판정 등 핵심 규칙을 처리.
- **GameBoard.java**: 게임 보드의 상태(말의 위치, 포로 목록)를 관리.
- **Piece.java**: 말의 종류와 소유자 정보를 정의한 Enum.
